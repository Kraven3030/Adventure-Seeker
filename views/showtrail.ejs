<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="styles/showTrail.css"/>
  </head>
  <title>Trails</title>
  <body>
    <div class="trailPage" id="container">
      <a href="/"><button>Home</button></a>
      <button class="addTrailBtn">Add Trail</button>
      <div class="modal1">
        <div class="modal1-content">
            <span class="modal1CloseBtn">&times;</span>
            <form id="modalForm" action="/trails" method="post">
                <label for="name">Name of Trail:</label>
                <input type="text" id="name" name="name" />
                <label for="distance">Distance(mi):</label>
                <input type="text" id="distance" name="distance" />
                <label for="difficulty">Difficulty:</label>
                <input type="text" id="difficulty" name="difficulty" />
                <label for="image">Image URL:</label>
                <input type="text" id="image" name="image" placeholder="optional" />
                <label for="description">Description:</label>
                <textarea name="description"></textarea>
                <label for="location">Location:</label>
                <input type="text" id="location" name="location" />
                <button type="submit">Add Trail</button>
              </form>       
        </div>
      </div>
        <% for (let trail of trails) {%>
        <li class="db-trails">
          <h3><%= trail.name %></h3>
          <h5>Location: <%= trail.location%></h5>
          <img src="<%=trail.image%>" width="300" />
          <p><%= trail.description %></p>
          <h5>Distance: <%= trail.distance%></h5>
          <h5>Difficulty: <%= trail.difficulty%></h5>
          <button class="editTraillBtn">Edit trail</button>
            <div class="modal2">
              <div class="modal2-content">
                <span class="modal2CloseBtn">&times;</span>
                <form id="modalForm2" action="/trails"<%= trail._id %>?_method=PUT method="post">
                    <label for="name">Name of Trail:</label>
                    <input type="text" id="name" name="name" value="<%= trail._name%>" />
                    <label for="distance">Distance(mi):</label>
                    <input type="text" id="distance" name="distance" value="<%= trail._distance%>" />
                    <label for="difficulty">Difficulty:</label>
                    <input type="text" id="difficulty" name="difficulty" value="<%= trail._difficulty%>" />
                    <label for="description">Description:</label>
                    <textarea name="description" value="<%= trail._description%>"></textarea>
                    <label for="location">Location:</label>
                    <input type="text" id="location" name="location" value="<%= trail._location %>" />
                    <button type="submit">Edit Trail</button>
                  </form>       
              </div>
            </div>
          <form
            id="btn"
            action="/trails/<%= trail._id%>?_method=DELETE"
            method="POST"
          >
            <button type="submit" id="delete">Delete Trail</button>
          </form>
        </li>
        <% } %>
      </div>
    </div>
    <script >
    //Event listeners for Add Trail Modal
        const addModal = document.getElementsByClassName("modal1");
        const openAddModal = document.getElementsByClassName("addTrailBtn");
        const closeAddModal = document.getElementsByClassName("modal1CloseBtn")[0];

        openAddModal[0].addEventListener("click", openModal1);
        closeAddModal.addEventListener("click", closeModal1);
        window.addEventListener("click", outsideClick);

        function openModal1() {
            addModal[0].style.display = "block";
        }
        
        function closeModal1() {
            addModal[0].style.display = "none";
        }
        
        function outsideClick(e) {
            if (e.target == addModal[0]) {
                addModal[0].style.display = "none";
            }
        }
    //Event listener for the Edit Modal
    // const editModal = document.getElementsByClassName("modal2");
    //     const openEditModal = document.getElementsByClassName("editTrailBtn");
    //     const closeEditModal = document.getElementsByClassName("modal2CloseBtn")[0];

    //     openEditModal[0].addEventListener("click", openModal2);
    //     closeEditModal.addEventListener("click", closeModal2);
    //     window.addEventListener("click", outsideClick2);

    //     function openModal2() {
    //         editModal[0].style.display = "block";
    //         console.log(123)
    //     }
        
    //     function closeModal2() {
    //         editModal[0].style.display = "none";
    //     }
        
    //     function outsideClick2(e) {
    //         if (e.target == editModal[0]) {
    //             editModal[0].style.display = "none";
    //         }
    //     }
    </script>
  </body>
</html>
